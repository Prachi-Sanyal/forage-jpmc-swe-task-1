From 0355715d6aac235a04b3e746b926fc8518b15380 Mon Sep 17 00:00:00 2001
From: Prachi-Sanyal <sanyalprachi1004@gmail.com>
Date: Sat, 6 Apr 2024 18:27:59 +0530
Subject: [PATCH] Task 1

---
 .idea/.gitignore                              |   3 ++
 .idea/forage-jpmc-swe-task-1.iml              |  10 ++++
 .../inspectionProfiles/profiles_settings.xml  |   6 +++
 .idea/misc.xml                                |   4 ++
 .idea/modules.xml                             |   8 ++++
 __pycache__/client3.cpython-310.pyc           | Bin 0 -> 1148 bytes
 client3.py                                    |  43 ++++++++++++++++++
 client_test.py                                |  30 ++++++++++++
 main.py                                       |  16 +++++++
 9 files changed, 120 insertions(+)
 create mode 100644 .idea/.gitignore
 create mode 100644 .idea/forage-jpmc-swe-task-1.iml
 create mode 100644 .idea/inspectionProfiles/profiles_settings.xml
 create mode 100644 .idea/misc.xml
 create mode 100644 .idea/modules.xml
 create mode 100644 __pycache__/client3.cpython-310.pyc
 create mode 100644 client3.py
 create mode 100644 client_test.py
 create mode 100644 main.py

diff --git a/.idea/.gitignore b/.idea/.gitignore
new file mode 100644
index 0000000..26d3352
--- /dev/null
+++ b/.idea/.gitignore
@@ -0,0 +1,3 @@
+# Default ignored files
+/shelf/
+/workspace.xml
diff --git a/.idea/forage-jpmc-swe-task-1.iml b/.idea/forage-jpmc-swe-task-1.iml
new file mode 100644
index 0000000..74d515a
--- /dev/null
+++ b/.idea/forage-jpmc-swe-task-1.iml
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="PYTHON_MODULE" version="4">
+  <component name="NewModuleRootManager">
+    <content url="file://$MODULE_DIR$">
+      <excludeFolder url="file://$MODULE_DIR$/venv" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
\ No newline at end of file
diff --git a/.idea/inspectionProfiles/profiles_settings.xml b/.idea/inspectionProfiles/profiles_settings.xml
new file mode 100644
index 0000000..105ce2d
--- /dev/null
+++ b/.idea/inspectionProfiles/profiles_settings.xml
@@ -0,0 +1,6 @@
+<component name="InspectionProjectProfileManager">
+  <settings>
+    <option name="USE_PROJECT_PROFILE" value="false" />
+    <version value="1.0" />
+  </settings>
+</component>
\ No newline at end of file
diff --git a/.idea/misc.xml b/.idea/misc.xml
new file mode 100644
index 0000000..dc9ea49
--- /dev/null
+++ b/.idea/misc.xml
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.10" project-jdk-type="Python SDK" />
+</project>
\ No newline at end of file
diff --git a/.idea/modules.xml b/.idea/modules.xml
new file mode 100644
index 0000000..973696f
--- /dev/null
+++ b/.idea/modules.xml
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ProjectModuleManager">
+    <modules>
+      <module fileurl="file://$PROJECT_DIR$/.idea/forage-jpmc-swe-task-1.iml" filepath="$PROJECT_DIR$/.idea/forage-jpmc-swe-task-1.iml" />
+    </modules>
+  </component>
+</project>
\ No newline at end of file
diff --git a/__pycache__/client3.cpython-310.pyc b/__pycache__/client3.cpython-310.pyc
new file mode 100644
index 0000000000000000000000000000000000000000..fdad97b72718a3439abba463fb0c043383915d92
GIT binary patch
literal 1148
zcmYjQOK;Oa5Z<-dj?*S3g}y>B3sMC^loo*mig>C;2q7vS>VZ{|<z^?XTgOg!Hy}bP
zA%!239{DN!1&bS}UJ)lQFze8YwRUzs@6Pz!Z^l`*Iz@1N+nDWac!d10;QvuZ@Cc{=
zjz$tm6Cx%n6|}&PaHS)dbcH9G^u7?`OJA07EkPiI14r#c8N3nQB=4S!DInu%aQ7?Y
zDzNbk&@nwG$Ml$v&)HSfpoZt>#4PwQJEAQn&Wj6TPRzrCEW>%Y0CO<kVGCqLDLK3i
zi%=U;Id$Nv7$a(u)Nw~n*NIpvaODiwp#)1%A35S8=BmQQk%Jkyq;K$6Z%AY21aC;T
z2AB4X={48ZlB^vidzm)PyX$w?*ADxjK0b`){ZB{nFG@%o=h;Bz2*bI7Q$Ip8#GG|<
zM2+>FI+3pBapV-3ond$A4BbT{y=8L5hSZ`V>o8>F5AN`nDwF*-@F+>R*#n*eNRa$}
zl=MM!lkr_hK}7~na2c7Xm&K{!xu;FmKFCWZ>xDb9%)Oq9+c3eAJ~(lZUxVgeC&?ny
z@N)04pBYg0bza7RaB{wkXD6<*SNlrTG%ml_H=3<&4NA8jZ@zf8)#_v_+J)8qUbnrf
zKftQNu+^Kbb`nEsZr$j8%qzQKHj&;-ORs`Cv~9V-snHs(;G?Pt+xGLP!}@j>a?YVM
zq>^GI`L<9)M9Tyvat4?AQ!pGAh%=sbc)>f2c$CV2{tj2ROa=3Xlb8OTICXZ4jft_u
z@&Kv6w&~^(X&+7CFd9%*D|W-M8^viD4z9eil1aXzd1Uxi6s@_UuXDV5u@;{}uc2&;
zlRr34ERTU-ByTpB1>4tIDtv`pv#yxwt0akcZYaPu(?<9cEWB6SPhP*x=~ki98H+UP
zLKx;AM(;vS(Zf<oElQ{HC5+E{kmf#?ryH4^DTrk57nRm3KrThSmHoYyEk{w~qE%9p
zy9uOf#=bp=#(oDS`A;j`2x=nOy)O1>0uSu<^ffdA2~aTRGB<F8au8G;PHn9hXvMV^
MpTfua%ziTGFK3G!(f|Me

literal 0
HcmV?d00001

diff --git a/client3.py b/client3.py
new file mode 100644
index 0000000..9f0f9e6
--- /dev/null
+++ b/client3.py
@@ -0,0 +1,43 @@
+import json
+import random
+import urllib.request
+
+# Server API URLs
+QUERY = "http://localhost:8080/query?id={}"
+
+# 500 server request
+N = 500
+
+
+def getDataPoint(quote):
+    """ Produce all the needed values to generate a datapoint """
+    stock = quote['stock']
+    bid_price = float(quote['top_bid']['price'])
+    ask_price = float(quote['top_ask']['price'])
+    price = (bid_price + ask_price) / 2  # Calculate the average price
+    return stock, bid_price, ask_price, price
+
+
+def getRatio(price_a, price_b):
+    """ Get ratio of price_a and price_b """
+    if price_b == 0:
+        return 0  # Return 0 to avoid division by zero
+    return price_a / price_b
+
+
+# Main
+if __name__ == "__main__":
+    # Query the price once every N seconds.
+    for _ in range(N):
+        quotes = json.loads(urllib.request.urlopen(QUERY.format(random.random())).read())
+
+        for quote in quotes:
+            stock, bid_price, ask_price, price = getDataPoint(quote)
+            print("Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price))
+
+        # Calculate and print the ratio
+        if len(quotes) >= 2:
+            price_a = getDataPoint(quotes[0])[-1]
+            price_b = getDataPoint(quotes[1])[-1]
+            ratio = getRatio(price_a, price_b)
+            print("Ratio:", ratio)
diff --git a/client_test.py b/client_test.py
new file mode 100644
index 0000000..d112943
--- /dev/null
+++ b/client_test.py
@@ -0,0 +1,30 @@
+import unittest
+from client3 import getDataPoint
+
+class ClientTest(unittest.TestCase):
+    def test_getDataPoint_calculatePrice(self):
+        quotes = [
+            {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+            {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+        ]
+        # Iterate over quotes and test getDataPoint function
+        for quote in quotes:
+            # Expected output based on the given quote
+            expected_output = (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_bid']['price'] + quote['top_ask']['price']) / 2)
+            # Call the getDataPoint function with the current quote and assert the output
+            self.assertEqual(getDataPoint(quote), expected_output)
+
+    def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
+        quotes = [
+            {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+            {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+        ]
+        # Iterate over quotes and test getDataPoint function
+        for quote in quotes:
+            # Expected output based on the given quote
+            expected_output = (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_bid']['price'] + quote['top_ask']['price']) / 2)
+            # Call the getDataPoint function with the current quote and assert the output
+            self.assertEqual(getDataPoint(quote), expected_output)
+
+if __name__ == '__main__':
+    unittest.main()
\ No newline at end of file
diff --git a/main.py b/main.py
new file mode 100644
index 0000000..5596b44
--- /dev/null
+++ b/main.py
@@ -0,0 +1,16 @@
+# This is a sample Python script.
+
+# Press Shift+F10 to execute it or replace it with your code.
+# Press Double Shift to search everywhere for classes, files, tool windows, actions, and settings.
+
+
+def print_hi(name):
+    # Use a breakpoint in the code line below to debug your script.
+    print(f'Hi, {name}')  # Press Ctrl+F8 to toggle the breakpoint.
+
+
+# Press the green button in the gutter to run the script.
+if __name__ == '__main__':
+    print_hi('PyCharm')
+
+# See PyCharm help at https://www.jetbrains.com/help/pycharm/
-- 
2.44.0.windows.1

